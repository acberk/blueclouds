<html>

<head>
	<script src="http://cdn.date-fns.org/v1.9.0/date_fns.min.js"></script>
</head>

<body>
	<ul id="tempList">

	</ul>
</body>
<script>
	async function geoSuccess(pos) {
		const { latitude, longitude } = pos.coords
		const response = await fetch(`https://api.weather.gov/points/${latitude.toFixed(4)},${longitude.toFixed(4)}/forecast/hourly`)
		const json = await response.json()

		const ul = document.getElementById('tempList')
		json.properties.periods.forEach(p => {
			const li = document.createElement('li')
			const img = document.createElement('img')
			img.src = p.icon
			li.appendChild(img)
			li.appendChild(document.createTextNode(`${dateFns.format(p.startTime, 'h a')} - ${p.temperature}`))
			ul.appendChild(li)
		})
	}
	navigator.geolocation.getCurrentPosition(geoSuccess)
</script>

</html>